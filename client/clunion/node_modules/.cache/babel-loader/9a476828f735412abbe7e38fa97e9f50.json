{"ast":null,"code":"var _jsxFileName = \"/Users/chinw/ga_seir/Unit2/projects/newCLU/CLUnion2022/client/clunion/src/components/Receipt.jsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Checkout from '../components/Checkout';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport '../style/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Receipt = _ref => {\n  _s();\n\n  let {\n    checkout,\n    item,\n    category\n  } = _ref;\n  const [receipt, setReceipt] = useState({});\n  useEffect(() => {\n    const saveReceipt = async () => {\n      console.log(receipt, \"AXIOS RECEIPT\");\n      const response = await axios.post(`http:localhost:3001/api/receipt`);\n      console.log(response, 'RECEIPT POST');\n      setReceipt(response.data);\n      console.log(response.data);\n    };\n\n    saveReceipt();\n  }, []);\n  let items = checkout.sort();\n  let total = 0;\n  let data = [];\n\n  const getItems = id => {\n    let result = {};\n    item.forEach(el => {\n      if (el._id === id) {\n        console.log(el, 'RIGHT ITEM');\n        result = el;\n        return;\n      }\n    });\n    return result;\n  };\n\n  console.log(getItems(\"62461c776d61e9345ae67f03\"), 'RETURN ITEM');\n\n  const getItemDetails = () => {\n    for (let i = 0; i < items.length; i++) {\n      if (i = 0) {\n        data.push({ ...getItems(items[i]),\n          count: 1\n        });\n      } else if (items[i] === items[i - 1]) {\n        data[data.length - 1].count++;\n      } else {\n        data.push({ ...getItems(items[i]),\n          count: 1\n        });\n      }\n    }\n  };\n\n  getItemDetails();\n  console.log(data, 'ITEM DETAILS'); // const receipt = {\n  //   items: [...checkout],\n  //   totalCost: data.reduce((total, items) => total += items.price * items.quantityNeeded, 0),\n  //   date: Date,\n  //   purchaseStatus: true,\n  //   registry: category\n  // }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Thank you for your purchase!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Here is your receipt!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Receipt Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), data.map(item => {\n        total += item.price * item.itemsLeft;\n        return `Thank you for your order! You have purchased ${item.itemsLeft} of ${item.title} for ${item.price}`;\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Receipt, \"J2+Q/Nb93twVTjmYDzvexyjd1lI=\");\n\n_c = Receipt;\nexport default Receipt;\n\nvar _c;\n\n$RefreshReg$(_c, \"Receipt\");","map":{"version":3,"sources":["/Users/chinw/ga_seir/Unit2/projects/newCLU/CLUnion2022/client/clunion/src/components/Receipt.jsx"],"names":["React","Checkout","axios","useState","useEffect","Receipt","checkout","item","category","receipt","setReceipt","saveReceipt","console","log","response","post","data","items","sort","total","getItems","id","result","forEach","el","_id","getItemDetails","i","length","push","count","map","price","itemsLeft","title"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Checkout from '../components/Checkout'\nimport axios from 'axios'\nimport { useState, useEffect } from 'react'\nimport '../style/App.css'\n\nconst Receipt = ({checkout, item, category}) => {\n\n  const [receipt, setReceipt] = useState({})\n\n  useEffect(() => {\n    const saveReceipt = async () => {\n      console.log(receipt, \"AXIOS RECEIPT\")\n      const response = await axios.post(`http:localhost:3001/api/receipt`)\n        console.log(response, 'RECEIPT POST')\n        setReceipt(response.data)\n        console.log(response.data)\n    }\n    saveReceipt()\n  }, [])\n  \n  let items = checkout.sort()\n  let total = 0\n\n  let data = []\n\n  const getItems = (id) => {\n    let result = {}\n    item.forEach(el => {\n      if (el._id === id) {\n        console.log(el, 'RIGHT ITEM')\n        result = el\n        return\n      }\n    })\n    return result\n  }\n  console.log(getItems(\"62461c776d61e9345ae67f03\"), 'RETURN ITEM')\n\n  const getItemDetails = () => {\n    for (let i=0; i<items.length; i++) {\n      if (i = 0) {\n        data.push({...getItems(items[i]), count: 1})\n      } else if (items[i] === items[i-1]) {\n        data[data.length - 1].count++\n      } else {\n        data.push({...getItems(items[i]), count: 1})\n      }\n    }\n  }\n  getItemDetails()\n  console.log(data, 'ITEM DETAILS')\n\n\n  // const receipt = {\n  //   items: [...checkout],\n  //   totalCost: data.reduce((total, items) => total += items.price * items.quantityNeeded, 0),\n  //   date: Date,\n  //   purchaseStatus: true,\n  //   registry: category\n  // }\n\n\n\n\n  return (\n    <div>\n      <h1>Thank you for your purchase!</h1>\n      <h3>Here is your receipt!</h3>\n      <div>\n        <h2>Receipt Summary</h2>\n        {data.map((item) => {\n          total += item.price * item.itemsLeft\n          return(`Thank you for your order! You have purchased ${item.itemsLeft} of ${item.title} for ${item.price}`)\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default Receipt"]},"metadata":{},"sourceType":"module"}