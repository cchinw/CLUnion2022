{"ast":null,"code":"var _jsxFileName = \"/Users/chinw/ga_seir/Unit2/projects/newCLU/CLUnion2022/client/clunion/src/components/Receipt.jsx\";\nimport React from 'react';\nimport Checkout from '../components/Checkout';\nimport axios from 'axios';\nimport { useState, useEffect } from 'react';\nimport '../style/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Receipt = _ref => {\n  let {\n    checkout,\n    item,\n    category\n  } = _ref;\n  let items = checkout.sort();\n  let total = 0;\n  let data = [];\n\n  const getItems = id => {\n    let result = {};\n    item.forEach(el => {\n      if (el._id === id) {\n        console.log(el, 'RIGHT ITEM');\n        result = el;\n        return;\n      }\n    });\n    return result;\n  };\n\n  console.log(getItems(\"62461c776d61e9345ae67f03\"), 'RETURN ITEM');\n\n  const getItemDetails = () => {\n    for (let i = 0; i < items.length; i++) {\n      if (i = 0) {\n        data.push({ ...getItems(items[i]),\n          count: 1\n        });\n      } else if (items[i] === items[i - 1]) {\n        data[data.length - 1].count++;\n      } else {\n        data.push({ ...getItems(items[i]),\n          count: 1\n        });\n      }\n    }\n  };\n\n  getItemDetails();\n  console.log(data, 'ITEM DETAILS');\n  const receipt = {\n    items: [...checkout],\n    totalCost: data.reduce((total, items) => total += items.price * items.quantityNeeded, 0),\n    date: Date,\n    purchaseStatus: true,\n    registry: category\n  };\n\n  const saveReceipt = async () => {\n    console.log(receipt, \"AXIOS RECEIPT\");\n    await axios.post(`http:localhost:3001/api/receipt`, receipt).then(function (response) {\n      console.log(response);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  saveReceipt();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Thank you for your purchase!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Here is your receipt!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Receipt Summary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this), data.map(item => {\n        total += item.price * item.itemsLeft;\n        return `Thank you for your order! You have purchased ${item.itemsLeft} of ${item.title} for ${item.price}`;\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_c = Receipt;\nexport default Receipt;\n\nvar _c;\n\n$RefreshReg$(_c, \"Receipt\");","map":{"version":3,"sources":["/Users/chinw/ga_seir/Unit2/projects/newCLU/CLUnion2022/client/clunion/src/components/Receipt.jsx"],"names":["React","Checkout","axios","useState","useEffect","Receipt","checkout","item","category","items","sort","total","data","getItems","id","result","forEach","el","_id","console","log","getItemDetails","i","length","push","count","receipt","totalCost","reduce","price","quantityNeeded","date","Date","purchaseStatus","registry","saveReceipt","post","then","response","catch","error","map","itemsLeft","title"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Checkout from '../components/Checkout'\nimport axios from 'axios'\nimport { useState, useEffect } from 'react'\nimport '../style/App.css'\n\nconst Receipt = ({checkout, item, category}) => {\n\n  let items = checkout.sort()\n  let total = 0\n\n  let data = []\n\n  const getItems = (id) => {\n    let result = {}\n    item.forEach(el => {\n      if (el._id === id) {\n        console.log(el, 'RIGHT ITEM')\n        result = el\n        return\n      }\n    })\n    return result\n  }\n  console.log(getItems(\"62461c776d61e9345ae67f03\"), 'RETURN ITEM')\n\n  const getItemDetails = () => {\n    for (let i=0; i<items.length; i++) {\n      if (i = 0) {\n        data.push({...getItems(items[i]), count: 1})\n      } else if (items[i] === items[i-1]) {\n        data[data.length - 1].count++\n      } else {\n        data.push({...getItems(items[i]), count: 1})\n      }\n    }\n  }\n  getItemDetails()\n  console.log(data, 'ITEM DETAILS')\n\n\n  const receipt = {\n    items: [...checkout],\n    totalCost: data.reduce((total, items) => total += items.price * items.quantityNeeded, 0),\n    date: Date,\n    purchaseStatus: true,\n    registry: category\n  }\n\n  const saveReceipt = async () => {\n    console.log(receipt, \"AXIOS RECEIPT\")\n    await axios.post(`http:localhost:3001/api/receipt`, receipt).then(function (response) {\n      console.log(response)\n    }).catch(function(error) {\n      console.log(error)\n    })\n  }\n  saveReceipt()\n\n\n\n  return (\n    <div>\n      <h1>Thank you for your purchase!</h1>\n      <h3>Here is your receipt!</h3>\n      <div>\n        <h2>Receipt Summary</h2>\n        {data.map((item) => {\n          total += item.price * item.itemsLeft\n          return(`Thank you for your order! You have purchased ${item.itemsLeft} of ${item.title} for ${item.price}`)\n        })}\n      </div>\n    </div>\n  )\n}\n\nexport default Receipt"]},"metadata":{},"sourceType":"module"}