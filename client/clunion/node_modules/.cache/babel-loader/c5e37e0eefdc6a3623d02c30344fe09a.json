{"ast":null,"code":"var _jsxFileName = \"/Users/chinw/ga_seir/Unit2/projects/newCLU/CLUnion2022/client/clunion/src/components/Category.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React from 'react';\nimport { useState, useEffect } from 'react';\nimport { useParams, Link } from 'react-router-dom';\nimport Item from '../components/Item';\nimport Checkout from './Checkout';\nimport Receipt from './Receipt';\nimport '../style/App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Category = _ref => {\n  _s();\n\n  let {\n    item\n  } = _ref;\n  const {\n    regId\n  } = useParams();\n  const [categoryItems, setCategoryItems] = useState([]);\n  const [receipt, setReceipt] = useState({});\n  const [selectedItem, setSelectedItem] = useState(false);\n  const [checkout, setCheckout] = useState([]);\n  const [items, setItems] = useState([]);\n  const BASE_URL = 'http://localhost:3001/api';\n  useEffect(() => {\n    let isCancelled = false;\n\n    const getItemsByCategoryId = async () => {\n      const response = await axios.get(`http://localhost:3001/api/category/${regId}/items`);\n\n      if (!isCancelled) {\n        setCategoryItems(response.data);\n        console.log(response.data);\n      }\n    };\n\n    getItemsByCategoryId();\n    return () => {\n      isCancelled = true;\n    };\n  }, []);\n\n  const addToCheckout = (e, id) => {\n    setCheckout(currentCheckout => {\n      return [...currentCheckout, id];\n    });\n  };\n\n  const removeFromCheckout = (e, id) => {\n    setCheckout(currentCheckout => {\n      let items = currentCheckout;\n\n      for (let i = 0; i < items.length; i++) {\n        if (items[i] === id) {\n          items.splice(i, 1);\n          break;\n        }\n      }\n\n      return [...items];\n    });\n  };\n\n  useEffect(() => {\n    const checkoutItems = async () => {\n      const response = await axios.post(`http://localhost:3001/api//checkout/:regid`);\n      setCheckout(response.data);\n      setSelectedItem(true);\n    };\n  }, []);\n\n  const checkoutCondition = () => {\n    if (selectedItem) {\n      /*#__PURE__*/\n      _jsxDEV(Checkout, {\n        checkoutId: checkout._id,\n        items: items,\n        price: items.price\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 7\n      }, this);\n    } else if (selectedItem && items > 1) {\n      /*#__PURE__*/\n      _jsxDEV(Receipt, {\n        receiptId: receipt._id,\n        price: items.price,\n        items: items,\n        checkout: checkout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 7\n      }, this);\n    } else {\n      /*#__PURE__*/\n      _jsxDEV(\"div\", {\n        className: \"registryComponent\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registryInfo\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: items.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Thank you so much for your kind gift. We really appreciate you! Love, Chinwendu and Lekan\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            src: items.image,\n            alt: \"item-images\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"registryItems\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Categories\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 11\n          }, this), items.map(item => {\n            /*#__PURE__*/\n            _jsxDEV(Item, {\n              BASE_URL: BASE_URL,\n              item: item,\n              className: \"item\",\n              onClickAdd: addToCheckout,\n              onClickRemove: removeFromCheckout\n            }, item._id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 16\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"checkout\",\n          children: /*#__PURE__*/_jsxDEV(Checkout, {\n            onClick: checkoutItems,\n            checkout: checkout\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 11\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 7\n      }, this);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"selectCategoryItems\",\n    children: categoryItems.map(items => /*#__PURE__*/_jsxDEV(Item, {\n      items: items,\n      addToCheckout: addToCheckout,\n      removeFromCheckout: removeFromCheckout,\n      checkoutCondition: checkoutCondition\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Category, \"XYh2UpWK/hJqkl68CNe1IoQSkRM=\", false, function () {\n  return [useParams];\n});\n\n_c = Category;\nexport default Category;\n\nvar _c;\n\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"sources":["/Users/chinw/ga_seir/Unit2/projects/newCLU/CLUnion2022/client/clunion/src/components/Category.jsx"],"names":["axios","React","useState","useEffect","useParams","Link","Item","Checkout","Receipt","Category","item","regId","categoryItems","setCategoryItems","receipt","setReceipt","selectedItem","setSelectedItem","checkout","setCheckout","items","setItems","BASE_URL","isCancelled","getItemsByCategoryId","response","get","data","console","log","addToCheckout","e","id","currentCheckout","removeFromCheckout","i","length","splice","checkoutItems","post","checkoutCondition","_id","price","title","image","map"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport React from 'react'\nimport { useState, useEffect } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport Item from '../components/Item'\nimport Checkout from './Checkout'\nimport Receipt from './Receipt'\nimport '../style/App.css'\n\n\nconst Category = ({item}) => {\n  const {regId} = useParams()\n  const [categoryItems, setCategoryItems] = useState([])\n  const [receipt, setReceipt] = useState({})\n  const [selectedItem, setSelectedItem] = useState(false)\n  const [checkout, setCheckout] = useState([])\n  const [items, setItems] = useState([])\n  const BASE_URL = 'http://localhost:3001/api'\n\n\n  useEffect(() => {\n    let isCancelled = false\n    const getItemsByCategoryId = async () => {\n      const response = await axios.get(`http://localhost:3001/api/category/${regId}/items`)\n      if (!isCancelled) {\n        setCategoryItems(response.data)\n        console.log(response.data)\n      }\n    } \n    getItemsByCategoryId()\n    return() => {\n      isCancelled = true\n    }\n  }, [])\n\n  const addToCheckout = (e, id) => {\n    setCheckout((currentCheckout) => {return [...currentCheckout, id]})\n  }\n\n  const removeFromCheckout = (e, id) => {\n    setCheckout((currentCheckout) => {\n      let items = currentCheckout\n      for (let i=0; i<items.length; i++) {\n        if (items[i] === id) {\n          items.splice(i, 1)\n          break\n        }\n      }\n      return [...items]\n    })\n  }\n  \n  useEffect(() => {\n    const checkoutItems = async () => {\n      const response = await axios.post(`http://localhost:3001/api//checkout/:regid`)\n      setCheckout(response.data)\n      setSelectedItem(true)\n    }\n  } ,[])\n\n\n const checkoutCondition = () => {\n  if (selectedItem) {\n      <Checkout checkoutId={checkout._id} items={items} price={items.price} />\n  }else if (selectedItem && items > 1) {\n      <Receipt receiptId={receipt._id} price={items.price} items={items} checkout={checkout} />\n    } else {\n      <div className=\"registryComponent\">\n        <div className=\"registryInfo\">\n          <h1>{items.title}</h1>\n          <p>Thank you so much for your kind gift. We really appreciate you! Love, Chinwendu and Lekan</p>\n          <img src={items.image} alt='item-images'/>\n        </div>\n        <div className=\"registryItems\">\n          <h2>Categories</h2>\n            {items.map((item) => {\n              (<Item BASE_URL={BASE_URL} item={item} className='item' key={item._id} onClickAdd={addToCheckout} onClickRemove={removeFromCheckout} />)\n            })}\n        </div>\n        <section className=\"checkout\">\n          <Checkout onClick={checkoutItems} checkout={checkout} />\n        </section>\n      </div>\n  }\n }\n \n\n  return (\n    <div className='selectCategoryItems'>\n        {categoryItems.map((items) => (\n            <Item\n            items={items}\n            addToCheckout={addToCheckout}\n            removeFromCheckout={removeFromCheckout}\n            checkoutCondition={checkoutCondition}\n            />\n        ))}\n    </div>\n    )\n}\n\nexport default Category"]},"metadata":{},"sourceType":"module"}